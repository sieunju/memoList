<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1">
<link type="text/css" rel="stylesheet" href="../public/css/materialize.css">
<link type="text/css" rel="stylesheet" href="../public/css/common_color.css">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">


<title>메모</title>

<body>

  <!-- 검색 -->
  <nav>
    <div class="nav-wrapper">
      <form>
        <div class="input-field">
          <input id="search" type="search" required>
          <label class="label-icon" for="search"><i class="material-icons">search</i></label>
          <i class="material-icons">close</i>
        </div>
      </form>
    </div>
  </nav>

  <button onclick="getMemo()">클릭해봐! </button>

  <!-- 메모 리스트 -->
  <div id="memo_list" class="col s12 m6" style="margin-left: 10px; margin-right: 10px;">

  </div>


  <!-- 플로팅 버튼 -->
  <div class="fixed-action-btn" id="btn-floating">
    <a href="./addMemo" class="btn-floating btn-large waves-effect waves-light red"><i
        class="material-icons">add</i></a>
  </div>

  <div class="" style="margin-left: 10px; margin-right: 10px;">
    <div class="col s12 m6">
      <div class="card blue-grey darken-1">
        <div class="card-content white-text">
          <span class="card-title">Card Title</span>
          <p>안녕하세요 <br />저는 주홍민 입니다.<br />만나서 반갑 습니다.<br />
          </p>
        </div>
        <div class="card-action tag_color tag3">
        </div>
      </div>
    </div>

    <script type="text/javascript" src="../public/js/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" language="javascript">
      function getMemo() {

        // const root = document.createElement('div');
        // const background = document.createElement('div');
        // const textArea = document.createElement('div');
        // const titleSpan = document.createElement('span');

        // root.className = 'col s12 m6';
        // background.className = 'card blue-grey darken-1';
        // textArea.className = 'card-content white-text';
        // titleSpan.className = 'card-title';

        // textArea.append(titleSpan);
        // background.append(textArea);
        // root.append(background);

        $.ajax({
          type: "GET",
          url: "./api/memoList",
          data: {
            pageNo: 1,
            test: "eee"
          },
          dataType: "JSON",
          success: function (json) {
            console.log(json);
            json.dataList.forEach(element => {
              const title = element.TITLE;
              const contents = element.CONTENTS;
              const tagColor = 'tag' + element.TAG;
              
              /* Root View */
              const rootDiv = document.createElement('div');
              rootDiv.className = 'col s12 m6';

              /* Background View */
              const bgDiv = document.createElement('div');
              bgDiv.className = 'card blue-grey darken-1';

              /* Contents View */
              const contentsDiv = document.createElement('div');
              contentsDiv.className = 'card-content white-text';

              /* Tag View */
              const tagDiv = document.createElement('div');
              tagDiv.className = 'card-action tag_color ' + tagColor;

              /* View Append */
              bgDiv.append(contentsDiv);
              bgDiv.append(tagDiv);
              rootDiv.append(bgDiv);

              /* bindView */
              contentsDiv.innerHTML = '<span class="card-title">' + title + '</span>' + '<p>' + contents + '</p>'; 
                          
              document.getElementById('memo_list').appendChild(rootDiv);
            });
          },
          error: function (xhr, status, error) {
            alert(error);
          }
        });
      }
    </script>

    <script type="text/javascript" src="../public/js/materialize.js"></script>
    <script type="text/javascript" src="../public/js/memoList.js"></script>
</body>

</html>